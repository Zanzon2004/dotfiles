#!/bin/bash

set -euo pipefail

# Paths
DWMPATH="$HOME/Personal-Build/dwm"
DMENUPATH="$HOME/Personal-Build/dmenu"

# Rebuild and install dwm and dmenu
# These assume the user is in the wheel group (see sudo visudo)
[ -d "$DWMPATH" ] && (cd "$DWMPATH" && [ -f config.def.h ] && [ -f config.h ] && rm -f config.h && sudo make clean install)

[ -d "$DMENUPATH" ] && (cd "$DMENUPATH" && [ -f config.def.h ] && [ -f config.h ] && rm -f config.h && sudo make clean install)

# Reload dwm
kill -HUP $(pidof dwm) # requires restartsig dwm patch 

notify-send "Changes applied."
